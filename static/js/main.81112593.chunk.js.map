{"version":3,"sources":["components/Modal/Modal.jsx","components/PlayerList/PlayerList.jsx","components/Form/Form.jsx","EventSourcing.jsx","App.js","index.js"],"names":["ModalContent","active","setActive","playerById","className","onClick","e","stopPropagation","src","avatar","alt","name","score","bio","PlayerList","players","findPlayerById","map","player","Form","setValue","setSelectedSort","value","placeholder","type","onChange","target","EventSourcing","useState","setPlayers","modalActive","setModalActive","playerByID","setPlayerById","selectedSort","useEffect","subscribe","a","eventSource","EventSource","event","JSON","parse","data","prev","sort","firstScore","secondScore","firstPlayer","secondPlayer","length","Error","onmessage","filterPlayer","filter","toLowerCase","includes","playerId","findPlayer","find","role","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.81112593.chunk.js","sourcesContent":["import React from \"react\";\nimport './modal.css'\n\nexport const ModalContent = ({ active, setActive, playerById }) => {\n    return (\n        <div className={active ? 'modal active' : 'modal'} onClick={() => setActive(false)}>\n            <div className=\"modal__content\" onClick={e => e.stopPropagation()}>\n                <img className=\"modal_img\" src={`${playerById.avatar}`} alt=\"img\"/>\n                <div className=\"modal__name\">{playerById.name}</div>\n                <div className=\"modal__score\">Score: {playerById.score}</div>\n                <div className=\"modal__bio\">{playerById.bio}</div>\n                <button className=\"modal__button\" onClick={() => setActive(false)}>X Close</button>\n            </div>\n        </div>\n    )\n}","import React from \"react\";\nimport './Players.css'\n\nexport const PlayerList = ({ players, setActive, findPlayerById }) => {\n    return (\n        <div className=\"list__player\">\n            {players.map((player) =>\n                <div\n                    onClick={() => {\n                        findPlayerById(player.score)\n                        setActive(true)\n                    }}\n                    className=\"alert alert-light text-dark player\"\n                    key={player.score}\n                >\n                    <span>\n                        <img className=\"img\" src={`${player.avatar}`} alt=\"img\"/>\n                        {' '}\n                        <span>{`name : ${player.name}`}</span>\n                    </span>\n                    <span>\n                        {`score: ${player.score}`}\n                    </span>\n                </div>\n            )}\n        </div>\n    )\n}","import React from \"react\";\nimport './form.css'\n\nexport const Form = ({setValue, setSelectedSort, value}) => {\n    return (\n        <form className=\"form alert-light text-light\">\n            <label>\n                <input\n                    className=\"form__input\"\n                    placeholder=\"Player’s name\"\n                    type=\"text\"\n                    value={value}\n                    onChange={(e) => {\n                        setValue(e.target.value)\n                    }}\n                />\n            </label>\n            <div className=\"input-group-btn\">\n                <select onChange={e => setSelectedSort(e.target.value)} className=\"btn btn-default dropdown-toggle form__select\">\n                    <option value=\"score\">Score</option>\n                    <option value=\"name\">Name</option>\n                </select>\n            </div>\n        </form>\n    )\n}","import React, { useEffect, useState } from \"react\";\nimport { ModalContent } from \"./components/Modal/Modal\";\nimport {PlayerList} from \"./components/PlayerList/PlayerList\";\nimport {Form} from \"./components/Form/Form\";\n\nexport const EventSourcing = () => {\n    const [players, setPlayers] = useState([])\n    const [value, setValue] = useState('')\n    const [modalActive, setModalActive] = useState(false)\n    const [playerByID, setPlayerById] = useState({})\n    const [selectedSort, setSelectedSort] = useState('score')\n\n    useEffect(() => {\n        subscribe()\n    }, [])\n\n    const subscribe = async () => {\n            const eventSource = new EventSource(`http://localhost:5000/`)\n            eventSource.onmessage = await function (event) {\n                const player = JSON.parse(event.data)\n                switch (selectedSort) {\n                    case 'score':\n                 setPlayers(prev => [...prev, player].sort(function(firstScore, secondScore){\n                    if(firstScore[selectedSort] > secondScore[selectedSort]) { return -1; }\n                    if(firstScore[selectedSort] < secondScore[selectedSort]) { return 1; }\n                    return 0\n                }))\n                        break;\n\n                    case 'name':\n                        setPlayers(prev => [...prev, player].sort(function(firstPlayer, secondPlayer){\n                            if(firstPlayer[selectedSort].length > secondPlayer[selectedSort].length) { return -1; }\n                            if(firstPlayer[selectedSort].length < secondPlayer[selectedSort].length) { return 1; }\n                            return 0\n                        }))\n                        break;\n\n                    default:\n                        throw new Error('Уупс!')\n                }\n        }\n    }\n\n    useEffect(() => {\n        const filterPlayer = [...players].filter(player => (player.name.toLowerCase()).includes((value).toLowerCase()))\n        setPlayers([...filterPlayer])\n    },[value])\n\n    const findPlayerById = (playerId) => {\n        const findPlayer = players.find(player => player.score === playerId)\n        setPlayerById(findPlayer)\n    }\n\n    if (!players.length) {\n        return (\n            <div className=\"loading\">\n                <span>No players available...</span>\n                <br/>\n                <div className=\"spinner-border text-warning\" role=\"status\">\n                    <span className=\"visually-hidden\">Loading...</span>\n                </div>\n            </div>\n        )\n    }\n\n    return (\n        <>\n        <h1 className=\"title\">Score board</h1>\n        <div className=\"center\">\n            <Form\n                value={value}\n                setValue={setValue}\n                setSelectedSort={setSelectedSort}\n            />\n            <div className=\"list__player\">\n            <PlayerList\n                players={players}\n                findPlayerById={findPlayerById}\n                setActive={setModalActive}\n            />\n                <ModalContent\n                    active={modalActive}\n                    setActive={setModalActive}\n                    playerById={playerByID}\n                />\n            </div>\n        </div>\n        </>\n    )\n}\n\n","import './App.css';\nimport { EventSourcing } from \"./EventSourcing\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n        <EventSourcing />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n\n);\n\n"],"sourceRoot":""}