{"version":3,"sources":["components/Modal/Modal.jsx","EventSourcing.jsx","App.js","index.js"],"names":["ModalContent","active","setActive","playerById","className","onClick","e","stopPropagation","src","avatar","alt","name","score","bio","EventSourcing","useState","players","setPlayers","value","setValue","modalActive","setModalActive","playerByID","setPlayerById","selectedSort","setSelectedSort","useEffect","subscribe","a","eventSource","EventSource","event","player","JSON","parse","data","prev","sort","firstScore","secondScore","firstPlayer","secondPlayer","length","Error","onmessage","filterPlayer","filter","toLowerCase","includes","htmlFor","placeholder","type","onChange","target","map","playerId","findPlayer","find","findPlayerById","role","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b7f5853e.chunk.js","sourcesContent":["import React from \"react\";\nimport './modal.css'\n\nexport const ModalContent = ({ active, setActive, playerById }) => {\n    return (\n        <div className={active ? 'modal active' : 'modal'} onClick={() => setActive(false)}>\n            <div className=\"modal__content\" onClick={e => e.stopPropagation()}>\n                <img className=\"modal_img\" src={`${playerById.avatar}`} alt=\"img\"/>\n                <div className=\"modal__name\">{playerById.name}</div>\n                <div className=\"modal__score\">Score: {playerById.score}</div>\n                <div className=\"modal__bio\">{playerById.bio}</div>\n                <button className=\"modal__button\" onClick={() => setActive(false)}>X Close</button>\n            </div>\n        </div>\n    )\n}","import React, { useEffect, useState } from \"react\";\nimport { ModalContent } from \"./components/Modal/Modal\";\n\nexport const EventSourcing = () => {\n    const [players, setPlayers] = useState([])\n    const [value, setValue] = useState('')\n    const [modalActive, setModalActive] = useState(false)\n    const [playerByID, setPlayerById] = useState({})\n    const [selectedSort, setSelectedSort] = useState('score')\n\n    useEffect(() => {\n        subscribe()\n    }, [])\n\n    const subscribe = async () => {\n            const eventSource = new EventSource(`http://localhost:5000/`)\n            eventSource.onmessage = await function (event) {\n                const player = JSON.parse(event.data)\n                switch (selectedSort) {\n                    case 'score':\n                 setPlayers(prev => [...prev, player].sort(function(firstScore, secondScore){\n                    if(firstScore[selectedSort] > secondScore[selectedSort]) { return -1; }\n                    if(firstScore[selectedSort] < secondScore[selectedSort]) { return 1; }\n                    return 0\n                }))\n                        break;\n\n                    case 'name':\n                        setPlayers(prev => [...prev, player].sort(function(firstPlayer, secondPlayer){\n                            if(firstPlayer[selectedSort].length > secondPlayer[selectedSort].length) { return -1; }\n                            if(firstPlayer[selectedSort].length < secondPlayer[selectedSort].length) { return 1; }\n                            return 0\n                        }))\n                        break;\n\n                    default:\n                        throw new Error('Уупс!')\n                }\n        }\n    }\n\n    useEffect(() => {\n        const filterPlayer = [...players].filter(player => (player.name.toLowerCase()).includes((value).toLowerCase()))\n        setPlayers([...filterPlayer])\n    },[value])\n\n    const findPlayerById = (playerId) => {\n        const findPlayer = players.find(player => player.score === playerId)\n        setPlayerById(findPlayer)\n    }\n\n    if (!players.length) {\n        return (\n            <div className=\"loading\">\n                <span>No players available...</span>\n                <br/>\n                <div className=\"spinner-border text-warning\" role=\"status\">\n                    <span className=\"visually-hidden\">Loading...</span>\n                </div>\n            </div>\n        )\n    }\n\n    return (\n        <>\n        <h1 className=\"title\">Score board</h1>\n        <div className=\"center\">\n            <form className=\"form alert-light text-light\">\n                <label htmlFor=\"\">\n                    <input\n                        placeholder=\"Player’s name\"\n                        className=\"form__input\"\n                        type=\"text\"\n                        value={value}\n                        onChange={(e) => {\n                            setValue(e.target.value)\n                        }}\n                    />\n                </label>\n\n                <div className=\"input-group-btn\">\n                    <select onChange={e => setSelectedSort(e.target.value)} className=\"btn btn-default dropdown-toggle form__select\">\n                        <option value=\"score\">Score</option>\n                        <option value=\"name\">Name</option>\n                    </select>\n                </div>\n            </form>\n            <div className=\"list__player\">\n                {players.map((player) =>\n                <div\n                    onClick={() => {\n                        findPlayerById(player.score)\n                        setModalActive(true)\n                    }}\n                    className=\"alert alert-light text-dark player\"\n                    key={player.score}\n                >\n                    <span>\n                        <img className=\"img\" src={`${player.avatar}`} alt=\"img\"/>\n                        {' '}\n                        <span>{`name : ${player.name}`}</span>\n                    </span>\n                    <span>\n                        {`score: ${player.score}`}\n                    </span>\n                </div>\n                )}\n                <ModalContent\n                    active={modalActive} setActive={setModalActive}\n                    playerById={playerByID}\n                />\n            </div>\n        </div>\n        </>\n    )\n}\n\n","import './App.css';\nimport { EventSourcing } from \"./EventSourcing\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n        <EventSourcing />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n\n);\n\n"],"sourceRoot":""}